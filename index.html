<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes, viewport-fit=cover">
    <meta name="mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
    <meta name="theme-color" content="#0a0a1f">
    
    <title>Academia Espacial 2.0 - Física Cuántica Interactiva</title>
    
    <!-- Fuentes Futuristas -->
    <link href="https://fonts.googleapis.com/css2?family=Orbitron:wght@400;700;900&family=Rajdhani:wght@300;400;600;700&family=Space+Mono:wght@400;700&display=swap" rel="stylesheet">
    
    <!-- Tailwind CSS para utilidades rápidas -->
    <script src="https://cdn.tailwindcss.com"></script>
    
    <!-- Iconos Modernos -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    
    <!-- Estilos -->
    <link rel="stylesheet" href="style.css">
    <link rel="stylesheet" href="orientation-styles.css">
    
    <!-- MathJax Configuración -->
    <script>
        window.MathJax = {
            tex: {
                inlineMath: [['$', '$'], ['\\(', '\\)']],
                displayMath: [['$$', '$$'], ['\\[', '\\]']],
                processEscapes: true,
                processEnvironments: true
            },
            options: {
                skipHtmlTags: ['script', 'noscript', 'style', 'textarea', 'pre']
            },
            startup: {
                ready: () => {
                    console.log('✅ MathJax 3 está listo');
                    MathJax.startup.defaultReady();
                }
            }
        };
    </script>
    <script src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js" id="MathJax-script"></script>
</head>

<body class="cosmic-body">
    <!-- Fondo Animado de Partículas -->
    <div class="cosmic-background">
        <div class="stars-layer-1"></div>
        <div class="stars-layer-2"></div>
        <div class="stars-layer-3"></div>
        <div class="nebula-effect"></div>
    </div>

    <!-- Contenedor Principal del Juego -->
    <div class="game-wrapper" id="gameWrapper">
        
        <!-- Panel Superior de Estadísticas -->
        <div class="stats-panel glass-panel" id="statsPanel">
            <div class="stats-grid">
                <!-- Nivel -->
                <div class="stat-card" data-stat="level">
                    <div class="stat-icon">
                        <i class="fas fa-rocket"></i>
                    </div>
                    <div class="stat-info">
                        <div class="stat-label">NIVEL</div>
                        <div class="stat-value" id="level">1</div>
                    </div>
                    <div class="stat-glow"></div>
                </div>

                <!-- Vidas -->
                <div class="stat-card" data-stat="lives">
                    <div class="stat-icon pulse-animation">
                        <i class="fas fa-heart"></i>
                    </div>
                    <div class="stat-info">
                        <div class="stat-label">VIDAS</div>
                        <div class="stat-value">
                            <div class="lives-container" id="livesContainer"></div>
                        </div>
                    </div>
                    <div class="stat-glow"></div>
                </div>

                <!-- Puntuación -->
                <div class="stat-card" data-stat="score">
                    <div class="stat-icon">
                        <i class="fas fa-star"></i>
                    </div>
                    <div class="stat-info">
                        <div class="stat-label">PUNTOS</div>
                        <div class="stat-value" id="score">0</div>
                    </div>
                    <div class="stat-glow"></div>
                </div>

                <!-- Progreso -->
                <div class="stat-card" data-stat="progress">
                    <div class="stat-icon">
                        <i class="fas fa-chart-line"></i>
                    </div>
                    <div class="stat-info">
                        <div class="stat-label">PROGRESO</div>
                        <div class="stat-value" id="progress">0/10</div>
                        <div class="progress-bar-modern">
                            <div class="progress-fill-modern" id="progressFill"></div>
                            <div class="progress-glow"></div>
                        </div>
                    </div>
                    <div class="stat-glow"></div>
                </div>

                <!-- Calificación -->
                <div class="stat-card" data-stat="grade">
                    <div class="stat-icon">
                        <i class="fas fa-trophy"></i>
                    </div>
                    <div class="stat-info">
                        <div class="stat-label">NOTA</div>
                        <div class="stat-value">
                            <span id="grade">0.0</span>
                            <span class="grade-stars">⭐</span>
                        </div>
                    </div>
                    <div class="stat-glow"></div>
                </div>

                <!-- Tema Actual -->
                <div class="stat-card" data-stat="topic">
                    <div class="stat-icon">
                        <i class="fas fa-atom"></i>
                    </div>
                    <div class="stat-info">
                        <div class="stat-label">TEMA</div>
                        <div class="stat-value" id="currentTopic">Magnitudes</div>
                    </div>
                    <div class="stat-glow"></div>
                </div>
            </div>
        </div>

        <!-- Canvas del Juego -->
        <div class="canvas-container">
            <canvas id="gameCanvas" class="game-canvas"></canvas>
            <div class="canvas-overlay"></div>
        </div>

        <!-- Panel de Control Futurista -->
        <div class="control-panel glass-panel" id="controlPanel">
            <!-- Selector de Temas -->
            <div class="topic-selector">
                <h3 class="section-title">
                    <i class="fas fa-microscope"></i>
                    TEMAS DE FÍSICA
                </h3>
                <div class="topics-grid">
                    <div class="topic-card">
                        <input type="checkbox" id="topicMagnitudes" name="gameTopics" value="magnitudes" checked>
                        <label for="topicMagnitudes" class="topic-label">
                            <i class="fas fa-ruler"></i>
                            <span>Magnitudes</span>
                            <div class="topic-glow"></div>
                        </label>
                    </div>
                    
                    <div class="topic-card">
                        <input type="checkbox" id="topicSI" name="gameTopics" value="si">
                        <label for="topicSI" class="topic-label">
                            <i class="fas fa-weight"></i>
                            <span>Sistema SI</span>
                            <div class="topic-glow"></div>
                        </label>
                    </div>
                    
                    <div class="topic-card">
                        <input type="checkbox" id="topicCinematica" name="gameTopics" value="cinematica">
                        <label for="topicCinematica" class="topic-label">
                            <i class="fas fa-route"></i>
                            <span>Cinemática</span>
                            <div class="topic-glow"></div>
                        </label>
                    </div>
                    
                    <div class="topic-card">
                        <input type="checkbox" id="topicMRU" name="gameTopics" value="mru">
                        <label for="topicMRU" class="topic-label">
                            <i class="fas fa-arrow-right"></i>
                            <span>MRU</span>
                            <div class="topic-glow"></div>
                        </label>
                    </div>
                    
                    <div class="topic-card">
                        <input type="checkbox" id="topicMRUA" name="gameTopics" value="mrua">
                        <label for="topicMRUA" class="topic-label">
                            <i class="fas fa-forward"></i>
                            <span>MRUA</span>
                            <div class="topic-glow"></div>
                        </label>
                    </div>
                    
                    <div class="topic-card">
                        <input type="checkbox" id="topicMCU" name="gameTopics" value="mcu">
                        <label for="topicMCU" class="topic-label">
                            <i class="fas fa-sync"></i>
                            <span>MCU</span>
                            <div class="topic-glow"></div>
                        </label>
                    </div>
                    
                    <div class="topic-card">
                        <input type="checkbox" id="topicGravedad" name="gameTopics" value="gravedad">
                        <label for="topicGravedad" class="topic-label">
                            <i class="fas fa-magnet"></i>
                            <span>Gravedad</span>
                            <div class="topic-glow"></div>
                        </label>
                    </div>
                    
                    <div class="topic-card">
                        <input type="checkbox" id="topicParabolico" name="gameTopics" value="parabolico">
                        <label for="topicParabolico" class="topic-label">
                            <i class="fas fa-bezier-curve"></i>
                            <span>Parabólico</span>
                            <div class="topic-glow"></div>
                        </label>
                    </div>
                </div>
            </div>

            <!-- Controles de Juego -->
            <div class="game-controls">
                <div class="controls-grid">
                    <!-- Selector de Nivel -->
                    <div class="control-item">
                        <label for="levelSelect" class="control-label">
                            <i class="fas fa-layer-group"></i>
                            NIVEL
                        </label>
                        <select id="levelSelect" class="futuristic-select">
                            <option value="1">Cadete (10)</option>
                            <option value="2">Piloto (20)</option>
                            <option value="3">Comandante (30)</option>
                        </select>
                    </div>

                    <!-- Botones de Acción -->
                    <div class="action-buttons">
                        <button id="startButton" class="quantum-button primary">
                            <span class="button-icon">🚀</span>
                            <span id="startButtonText" class="button-text">LANZAR</span>
                            <div class="button-glow"></div>
                        </button>
                        
                        <button id="pauseButton" class="quantum-button secondary" disabled>
                            <span class="button-icon">⏸️</span>
                            <span class="button-text">PAUSA</span>
                            <div class="button-glow"></div>
                        </button>
                        
                        <button id="soundButton" class="quantum-button accent">
                            <span class="button-icon">🔊</span>
                            <span class="button-text">SONIDO</span>
                            <div class="button-glow"></div>
                        </button>
                        
                        <button id="helpButton" class="quantum-button info">
                            <span class="button-icon">❓</span>
                            <span class="button-text">AYUDA</span>
                            <div class="button-glow"></div>
                        </button>
                        
                        <button id="resetButton" class="quantum-button danger">
                            <span class="button-icon">🔄</span>
                            <span class="button-text">REINICIAR</span>
                            <div class="button-glow"></div>
                        </button>
                    </div>
                </div>
            </div>
        </div>

        <!-- Footer Futurista -->
        <footer class="quantum-footer">
            <div class="footer-content">
                <div id="footer-author" class="footer-author">
                    <span class="author-prefix">DESARROLLADO POR</span>
                    <span class="author-name">MSC NÉSTOR FABIO MONTOYA PALACIOS</span>
                </div>
                <div class="footer-particles">
                    <div id="footer-ship" class="footer-ship">🛸</div>
                </div>
            </div>
            <div class="footer-wave"></div>
        </footer>
    </div>

    <!-- Modal de Pregunta Ultra Moderno -->
    <div id="questionModal" class="modal quantum-modal" style="display: none;">
        <div class="modal-backdrop"></div>
        <div class="modal-content glass-panel">
            <div class="modal-header">
                <h2 class="modal-title">
                    <i class="fas fa-brain"></i>
                    DESAFÍO CUÁNTICO
                </h2>
                <div class="modal-decorations">
                    <div class="decoration-line"></div>
                    <div class="decoration-dot"></div>
                    <div class="decoration-line"></div>
                </div>
            </div>
            
            <!-- Metadatos de la Pregunta -->
            <div id="questionData" class="question-metadata"></div>
            
            <!-- Contenido de la Pregunta -->
            <div id="questionText" class="question-content"></div>
            
            <!-- Contenedor de Opciones -->
            <div id="optionsContainer" class="options-container"></div>
            
            <!-- Botón de Respuesta -->
            <button id="answerButton" class="quantum-button primary large" disabled>
                <span class="button-icon">✅</span>
                <span class="button-text">CONFIRMAR RESPUESTA</span>
                <div class="button-glow"></div>
            </button>
        </div>
    </div>

    <!-- Modal de Feedback -->
    <div id="feedbackModal" class="modal quantum-modal" style="display: none;">
        <div class="modal-backdrop"></div>
        <div class="modal-content glass-panel">
            <div class="modal-header">
                <h2 id="feedbackTitle" class="modal-title"></h2>
                <div class="modal-decorations">
                    <div class="decoration-line"></div>
                    <div class="decoration-dot"></div>
                    <div class="decoration-line"></div>
                </div>
            </div>
            
            <div id="feedbackText" class="feedback-text"></div>
            <div id="solution-container" class="solution-container" style="display: none;"></div>
            
            <button id="nextButton" class="quantum-button primary large">
                <span class="button-icon">▶️</span>
                <span class="button-text">CONTINUAR</span>
                <div class="button-glow"></div>
            </button>
        </div>
    </div>

    <!-- Modal de Ayuda -->
    <div id="helpModal" class="modal quantum-modal" style="display: none;">
        <div class="modal-backdrop"></div>
        <div class="modal-content glass-panel">
            <div class="modal-header">
                <h2 class="modal-title">
                    <i class="fas fa-book"></i>
                    MANUAL DEL CADETE ESPACIAL
                </h2>
                <div class="modal-decorations">
                    <div class="decoration-line"></div>
                    <div class="decoration-dot"></div>
                    <div class="decoration-line"></div>
                </div>
            </div>
            
            <div class="help-content">
                <div class="help-section">
                    <h3><i class="fas fa-crosshairs"></i> MISIÓN</h3>
                    <p>Pilota tu nave cuántica y colisiona con objetos cósmicos para desbloquear desafíos de física. ¡Demuestra tu dominio del universo!</p>
                </div>
                
                <div class="help-section">
                    <h3><i class="fas fa-gamepad"></i> CONTROLES</h3>
                    <ul class="help-list">
                        <li><strong>Mouse/Táctil:</strong> Controla tu nave espacial</li>
                        <li><strong>Colisiones:</strong> Activan preguntas de física</li>
                        <li><strong>Temas:</strong> Selecciona múltiples áreas de estudio</li>
                        <li><strong>Niveles:</strong> Aumenta la dificultad progresivamente</li>
                    </ul>
                </div>
                
                <div class="help-section">
                    <h3><i class="fas fa-calculator"></i> MATEMÁTICAS</h3>
                    <p>Las ecuaciones se renderizán con notación matemática profesional. Los cálculos incluyen explicaciones paso a paso.</p>
                </div>
            </div>
            
            <button id="closeHelp" class="quantum-button primary">
                <span class="button-icon">🚀</span>
                <span class="button-text">¡ENTENDIDO!</span>
                <div class="button-glow"></div>
            </button>
        </div>
    </div>

    <!-- Modal de Nivel Completado -->
    <div id="levelUpModal" class="modal quantum-modal" style="display: none;">
        <div class="modal-backdrop"></div>
        <div class="modal-content glass-panel celebration">
            <div class="modal-header">
                <h2 id="levelUpTitle" class="modal-title">
                    <i class="fas fa-medal"></i>
                    ¡NIVEL COMPLETADO!
                </h2>
                <div class="modal-decorations">
                    <div class="decoration-line"></div>
                    <div class="decoration-dot"></div>
                    <div class="decoration-line"></div>
                </div>
            </div>
            
            <p id="levelUpText" class="level-up-text"></p>
            <div id="levelUpStats" class="level-stats glass-panel"></div>
            
            <button id="nextLevelButton" class="quantum-button primary large">
                <span class="button-icon">🚀</span>
                <span class="button-text">¡SIGUIENTE NIVEL!</span>
                <div class="button-glow"></div>
            </button>
        </div>
    </div>

    <!-- Modal de Pausa -->
    <div id="pauseModal" class="modal quantum-modal" style="display: none;">
        <div class="modal-backdrop"></div>
        <div class="modal-content glass-panel">
            <div class="modal-header">
                <h2 class="modal-title">
                    <i class="fas fa-pause-circle"></i>
                    JUEGO PAUSADO
                </h2>
                <div class="modal-decorations">
                    <div class="decoration-line"></div>
                    <div class="decoration-dot"></div>
                    <div class="decoration-line"></div>
                </div>
            </div>
            
            <p class="pause-text">El tiempo se ha detenido en el cosmos...</p>
            
            <div class="pause-buttons">
                <button id="resumeButton" class="quantum-button primary">
                    <span class="button-icon">▶️</span>
                    <span class="button-text">REANUDAR</span>
                    <div class="button-glow"></div>
                </button>
                
                <button id="restartFromPause" class="quantum-button danger">
                    <span class="button-icon">🔄</span>
                    <span class="button-text">REINICIAR</span>
                    <div class="button-glow"></div>
                </button>
            </div>
        </div>
    </div>

    <!-- Modal de Estadísticas Finales -->
    <div id="finalStatsModal" class="modal quantum-modal" style="display: none;">
        <div class="modal-backdrop"></div>
        <div class="modal-content glass-panel">
            <div class="modal-header">
                <h2 id="finalStatsTitle" class="modal-title"></h2>
                <div class="modal-decorations">
                    <div class="decoration-line"></div>
                    <div class="decoration-dot"></div>
                    <div class="decoration-line"></div>
                </div>
            </div>
            
            <div id="finalStatsContent" class="final-stats-content"></div>
            
            <button id="restartGameButton" class="quantum-button primary large">
                <span class="button-icon">🚀</span>
                <span class="button-text">JUGAR DE NUEVO</span>
                <div class="button-glow"></div>
            </button>
        </div>
    </div>

    <!-- Scripts -->
    <script src="orientation-manager.js"></script>
    <script src="questions.js"></script>
    <script src="curiosities.js"></script>
    <script src="game.js"></script>
</body>
</html>